#!/bin/bash
PRODUCT_HOME=/Applications/FluoRender.app/Contents
echo "Post installation process started"
#Change permissions in home directory
echo "Change permissions in product home"
cd ${PRODUCT_HOME}
chmod -R a+rwx MacOS

# Function to check and install Python
install_python() {
    if ! command -v python3.10 &> /dev/null;
    then
        echo "Python3.10 not found. Installing..."

        # Download and install
        /usr/bin/curl -o python-installer.pkg https://www.python.org/ftp/python/3.10.0/python-3.10.0post2-macos11.pkg
        sudo installer -pkg python-installer.pkg -target /

        echo "Python3.10 installed successfully."
    else
        echo "Python3.10 already exists."
    fi
}

# Check and install Python
install_python

# Check if Homebrew is installed
if ! command -v brew &> /dev/null; then
    echo "Homebrew not found. Installing Homebrew..."
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi

# Check if hdf5 is installed
if ! brew list hdf5 &> /dev/null; then
    echo "hdf5 not found. Installing hdf5..."
    brew install hdf5
else
    echo "hdf5 is already installed."
fi
